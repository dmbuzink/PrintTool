name: Build for Linux
    if: ${{ !vars.SHOULD_SKIP_LINUX }}
    runs-on: ubuntu-latest
    steps:  
    - uses: actions/checkout@v4   
      name: Checkout
    - uses: actions/setup-dotnet@v4
      name: Set up dotnet
    - run: dotnet restore --locked-mode
      name: Restore packages
    - run: dotnet build ${{github.workspace}}/PrintTool/PrintTool.csproj --no-restore -c ${{ env.BUILD_CONFIG }} -a ${{ env.BUILD_ARCHITECTURE}}
      name: Build project for release
    - run: dotnet build ${{github.workspace}}/PrintTool.UnitTests/PrintTool.UnitTests.csproj --no-restore -c ${{ env.BUILD_CONFIG }} -a ${{ env.BUILD_ARCHITECTURE}}
      name: Build test project
    - run: dotnet test ${{github.workspace}}/PrintTool.UnitTests/PrintTool.UnitTests.csproj --no-restore -c ${{ env.BUILD_CONFIG }} -a ${{ env.BUILD_ARCHITECTURE}}
      name: Run unit tests
    - run: dotnet publish ${{github.workspace}}/PrintTool/PrintTool.csproj -a x64 --output ${{github.workspace}}/artifacts/PrintToolLinux --no-restore -c ${{ env.BUILD_CONFIG }}
      name: Publish project and upload to artifact
    - uses: actions/upload-artifact@v4
      with:
        name: PrintToolLinux
        path: '${{github.workspace}}/artifacts/PrintToolLinux'
